<!-- 1. CSS: Das Aussehen unseres Banners -->
<style>
  /* ... (dein gesamter CSS-Code bleibt hier unverändert) ... */
  #theme-banner {
    position: fixed; bottom: 0; left: 0; width: 100%; background-color: #333;
    color: white; padding: 15px; text-align: center; z-index: 1000;
    display: none; box-shadow: 0 -2px 10px rgba(0,0,0,0.5);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
  }
  #theme-banner p { margin: 0 0 10px 0; font-size: 16px; }
  .banner-button {
    padding: 8px 15px; border: 1px solid white; background-color: transparent;
    color: white; cursor: pointer; margin: 0 5px; border-radius: 4px;
    transition: background-color 0.3s, color 0.3s;
  }
  .banner-button:hover { background-color: white; color: #333; }
</style>

<!-- 2. HTML: Die Struktur unseres Banners -->
<div id="theme-banner">
  <p>Choose your preferred theme:</p>
  <button id="light-mode-btn" class="banner-button">Light Mode</button>
  <button id="dark-mode-btn" class="banner-button">Dark Mode</button>
</div>

<!-- 3. JavaScript: Die Logik -->
<script>
  // Wir packen alles in eine globale Funktion, damit wir sie von außen aufrufen können
  function initializeThemeBanner() {
    const banner = document.getElementById('theme-banner');
    const lightBtn = document.getElementById('light-mode-btn');
    const darkBtn = document.getElementById('dark-mode-btn');

    if (typeof jtd === 'undefined') { return; }

    function chooseTheme(theme) {
      jtd.setTheme(theme);
      localStorage.setItem('themeChoice', theme);
      banner.style.display = 'none';
    }

    lightBtn.addEventListener('click', () => chooseTheme('light'));
    darkBtn.addEventListener('click', () => chooseTheme('dark'));

    const userChoice = localStorage.getItem('themeChoice');
    if (!userChoice) {
      banner.style.display = 'block';
    }
  }

  // Diese Funktion können wir von einem anderen Link aufrufen
  function showThemeChooser() {
    const banner = document.getElementById('theme-banner');
    banner.style.display = 'block';
  }

  window.addEventListener('load', initializeThemeBanner);
</script>
