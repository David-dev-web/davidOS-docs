<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="UTF-8">
    {% seo %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    {% include head-custom.html %}
  </head>
  <body>
    <div class="wrapper">

      <!-- NEUER, CLEANER HEADER START -->
      <header class="page-header" role="banner">
        <!-- Die Navigationsleiste kommt jetzt ganz nach oben -->
        <nav class="header-nav">
          {% for p in site.pages | sort: "nav_order" %}
            {% if p.title %}
              <a href="{{ p.url | relative_url }}" class="nav-link">{{ p.title }}</a>
            {% endif %}
          {% endfor %}
          {% if site.github.is_project_page %}
            <a href="{{ site.github.repository_url }}" class="nav-link github-link">View on GitHub</a>
          {% endif %}
        </nav>

        <!-- Der Hauptinhalt des Headers kommt danach -->
        <div class="header-content">
          <h1 class="project-name">{{ site.title | default: site.github.repository_name }}</h1>
          <p class="project-tagline">{{ site.description | default: site.github.project_tagline }}</p>
        </div>
      </header>
      <!-- NEUER, CLEANER HEADER ENDE -->

      <main id="content" class="main-content" role="main">
        {{ content }}

        <footer class="site-footer">
          <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
        </footer>
      </main>

      <!-- DARK MODE SWITCHER START -->
      <style>
        .theme-switcher {
          position: fixed; bottom: 20px; right: 20px;
          padding: 8px 12px; border-radius: 20px; cursor: pointer;
          font-size: 14px; z-index: 1000;
          font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif;
          background-color: #f0f0f0; color: #333; border: 1px solid #ddd;
          transition: all 0.3s;
        }
        body.dark-mode .theme-switcher {
          background-color: #222; color: #fff; border: 1px solid #444;
        }
      </style>
      <div id="theme-switch" class="theme-switcher">üåô Dark Mode</div>
      <script>
        (function( ) {
          const themeSwitch = document.getElementById('theme-switch');
          const body = document.body;

          function applyTheme(theme) {
            if (theme === 'dark') {
              body.classList.add('dark-mode');
              themeSwitch.textContent = '‚òÄÔ∏è Light Mode';
            } else {
              body.classList.remove('dark-mode');
              themeSwitch.textContent = 'üåô Dark Mode';
            }
          }

          function toggleTheme() {
            const newTheme = body.classList.contains('dark-mode') ? 'light' : 'dark';
            applyTheme(newTheme);
            if (canStoreThemeChoice()) {
              localStorage.setItem('theme', newTheme);
            }
          }
          
          window.applyThemeAfterConsent = function() {
            if (canStoreThemeChoice()) {
              const savedTheme = localStorage.getItem('theme');
              if (savedTheme) {
                applyTheme(savedTheme);
              }
            }
          }

          applyThemeAfterConsent(); // Direkt beim Laden ausf√ºhren

          themeSwitch.addEventListener('click', toggleTheme);
        })();
      </script>
      <!-- DARK MODE SWITCHER ENDE -->

    </div>

    <!-- ECHTES COOKIE-BANNER (MODAL) - START -->
    <style>
      .cc-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 2999; display: flex; justify-content: center; align-items: center;
      }
      .cc-modal {
        background-color: #161b22; color: #c9d1d9; padding: 25px 30px;
        border-radius: 8px; border: 1px solid #30363d;
        box-shadow: 0 5px 20px rgba(0,0,0,0.4);
        max-width: 550px; width: 90%; text-align: left;
      }
      .cc-modal h2 { color: #58a6ff; margin-top: 0; }
      .cc-modal p { color: #c9d1d9 !important; line-height: 1.6; }
      .cc-modal code { background-color: #313843; padding: 2px 4px; border-radius: 3px; }
      .cc-buttons { margin-top: 20px; display: flex; justify-content: flex-end; gap: 10px; }
      .cc-btn {
        border: none; padding: 10px 20px; border-radius: 5px;
        cursor: pointer; font-weight: bold; font-size: 14px;
      }
      .cc-btn-accept { background-color: #58a6ff; color: #fff; }
      .cc-btn-decline { background-color: #444; color: #eee; }
    </style>

    <div id="cookie-consent-modal" class="cc-overlay" style="display: none;">
      <div class="cc-modal">
        <h2>Your Privacy Matters</h2>
        <p>
          This website uses your browser's <code>localStorage</code> to enhance your experience by remembering your theme choice (Light/Dark Mode).
        </p>
        <p>
          By clicking <b>"Accept"</b>, you consent to this storage. If you <b>"Decline"</b>, your choice will not be saved, and the site will load with the default theme on each visit.
        </p>
        <div class="cc-buttons">
          <button id="cc-btn-decline" class="cc-btn cc-btn-decline">Decline</button>
          <button id="cc-btn-accept" class="cc-btn cc-btn-accept">Accept</button>
        </div>
      </div>
    </div>

    <script>
      function canStoreThemeChoice() {
        return localStorage.getItem('cookieConsent') === 'accepted';
      }

      (function() {
        const modal = document.getElementById('cookie-consent-modal');
        const acceptBtn = document.getElementById('cc-btn-accept');
        const declineBtn = document.getElementById('cc-btn-decline');

        function hideModal() {
          modal.style.display = 'none';
        }

        if (!localStorage.getItem('cookieConsent')) {
          modal.style.display = 'flex';
        }

        acceptBtn.addEventListener('click', () => {
          localStorage.setItem('cookieConsent', 'accepted');
          hideModal();
          if (window.applyThemeAfterConsent) {
            window.applyThemeAfterConsent();
          }
        });

        declineBtn.addEventListener('click', () => {
          localStorage.setItem('cookieConsent', 'declined');
          localStorage.removeItem('theme');
          hideModal();
        });
      })();
    </script>
    <!-- ECHTES COOKIE-BANNER (MODAL) - END -->

  </body>
</html>
